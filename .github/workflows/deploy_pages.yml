name: 2. GitHub Pages 自動デプロイ
# mainブランチにコードがマージ（プッシュ）されたときに起動 [9]
on:
  push:
    branches:
      - main 

jobs:
  deploy:
    runs-on: ubuntu-latest
    # Pagesデプロイに必要な権限のみを付与 [9]
    permissions:
      contents: read
      pages: write 
      id-token: write 
    environment: # デプロイの成功後にURLが表示される設定
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    
    steps:
      - name: ⬇️ リポジトリをチェックアウト
        uses: actions/checkout@v4
        
      - name: ⚙️ Pagesデプロイ環境のセットアップ
        uses: actions/configure-pages@v5 [9]
        
      - name: 📤 成果物（生成されたファイル）をアップロード
        # AIが生成したファイル（ルートディレクトリにある）を成果物としてアップロード
        uses: actions/upload-pages-artifact@v3
        with:
          path:. # ルートディレクトリ全体をデプロイ対象とする
          
      - name: 🚀 GitHub Pagesにデプロイ
        id: deployment
        uses: actions/deploy-pages@v4 [9]
        
      - name: ✅ デプロイURLの出力
        run: echo "ウェブサイトが公開されました: ${{ steps.deployment.outputs.page_url }}"